<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jan Sultan | Gallery</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Jan Sultan</a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li><a class="nav-link" href="index.html">Home</a></li>
                <li><a class="nav-link active" href="gallery.html">Gallery</a></li>
                <li><a class="nav-link" href="projects.html">Projects</a></li>
                <li><a class="nav-link" href="contact.html">Contact</a></li>
            </ul>
        </div>
    </div>
</nav>

<div id="app" class="container mt-5 pt-5">
    <div class="d-flex justify-content-between align-items-end mt-4">
        <div>
            <h2 class="text-white fw-bold display-5">Gallery</h2>
            <p class="text-white-50">A collection of moments and captures.</p>
        </div>
        <div class="gallery-controls mb-3">
            <button @click="scrollGallery('left')" class="btn-nav">←</button>
            <button @click="scrollGallery('right')" class="btn-nav">→</button>
        </div>
    </div>
    
    <div class="gallery-wrapper" ref="galleryWrapper" @scroll="updateProgress">
        <div class="gallery-scroll-container">
            <div v-for="(img, index) in galleryImages" :key="index" class="gallery-item fade-in">
                <img :src="'images/' + img" :alt="'Moment ' + (index + 1)">
            </div>
        </div>
    </div>

    <div class="scroll-progress-container">
        <div class="scroll-progress-bar" :style="{ width: scrollPercent + '%' }"></div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const app = Vue.createApp({
    data() {
        return {
            scrollPercent: 0,
            galleryImages: [
                'img1.jpg', 'img2.jpg', 'img3.jpg', 'img4.jpg', 'img5.jpg',
                'img6.jpg', 'img7.jpg', 'img8.jpg', 'img9.jpg', 'img10.jpg',
                'img11.jpg', 'img12.jpg', 'img13.jpg', 'img14.jpg', 'img15.jpg'
            ]
        }
    },
    methods: {
        scrollGallery(direction) {
            const container = this.$refs.galleryWrapper;
            const scrollAmount = 430; // Image width (400px) + gap (30px)
            if (direction === 'left') {
                container.scrollLeft -= scrollAmount;
            } else {
                container.scrollLeft += scrollAmount;
            }
        },
        updateProgress() {
            const container = this.$refs.galleryWrapper;
            const winScroll = container.scrollLeft;
            const width = container.scrollWidth - container.clientWidth;
            this.scrollPercent = (winScroll / width) * 100;
        },
        initObserver() {
            const observerOptions = {
                root: this.$refs.galleryWrapper,
                threshold: 0.2
            };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.gallery-item').forEach(item => {
                observer.observe(item); 
            });
        }
    },
    mounted() {
        this.initObserver();
    }
});
app.mount('#app');
</script>
</body>
</html>
